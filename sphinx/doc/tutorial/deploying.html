<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Appendix: Deploying a Sphinx project online &#8212; techwords 01 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <script src="../../_static/documentation_options.js?v=82a30901"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="appendix-deploying-a-sphinx-project-online">
<h1>Appendix: Deploying a Sphinx project online<a class="headerlink" href="#appendix-deploying-a-sphinx-project-online" title="Link to this heading">¶</a></h1>
<p>When you are ready to show your documentation project to the world, there are
many options available to do so. Since the HTML generated by Sphinx is static,
you can decouple the process of building your HTML documentation from hosting
such files in the platform of your choice. You will not need a sophisticated
server running Python: virtually every web hosting service will suffice.</p>
<p>Therefore, the challenge is less how or where to serve the static HTML, but
rather how to pick a workflow that automatically updates the deployed
documentation every time there is a change in the source files.</p>
<p>The following sections describe some of the available options to deploy
your online documentation, and give some background information. If you want
to go directly to the practical part, you can skip to <a class="reference internal" href="#publishing-sources"><span class="std std-ref">Publishing your documentation sources</span></a>.</p>
<section id="sphinx-friendly-deployment-options">
<h2>Sphinx-friendly deployment options<a class="headerlink" href="#sphinx-friendly-deployment-options" title="Link to this heading">¶</a></h2>
<p>There are several possible options you have to host your Sphinx documentation.
Some of them are:</p>
<dl class="simple">
<dt><strong>Read the Docs</strong></dt><dd><p><a class="reference external" href="https://readthedocs.org/">Read the Docs</a> is an online service specialized in hosting technical
documentation written in Sphinx, as well as MkDocs. They have a
number of extra features, such as versioned documentation, traffic and
search analytics, custom domains, user-defined redirects, and more.</p>
</dd>
<dt><strong>GitHub Pages</strong></dt><dd><p><a class="reference external" href="https://pages.github.com/">GitHub Pages</a> is a simple static web hosting tightly integrated with
<a class="reference external" href="https://github.com/">GitHub</a>: static HTML is served from one of the branches of a project,
and usually sources are stored in another branch so that the output
can be updated every time the sources change (for example using <a class="reference external" href="https://github.com/features/actions">GitHub
Actions</a>). It is free to use and supports custom domains.</p>
</dd>
<dt><strong>GitLab Pages</strong></dt><dd><p><a class="reference external" href="https://about.gitlab.com/stages-devops-lifecycle/pages/">GitLab Pages</a> is a similar concept to GitHub Pages, integrated with
<a class="reference external" href="https://gitlab.com/">GitLab</a> and usually automated with <a class="reference external" href="https://about.gitlab.com/stages-devops-lifecycle/continuous-integration/">GitLab CI</a> instead.</p>
</dd>
<dt><strong>Netlify</strong></dt><dd><p><a class="reference external" href="https://www.netlify.com/">Netlify</a> is a sophisticated hosting for static sites enhanced by
client-side web technologies like JavaScript (so-called <a class="reference external" href="https://jamstack.org/">“Jamstack”</a>).
They offer support for headless content management systems and
serverless computing.</p>
</dd>
<dt><strong>Your own server</strong></dt><dd><p>You can always use your own web server to host Sphinx HTML documentation.
It is the option that gives more flexibility, but also more complexity.</p>
</dd>
</dl>
<p>All these options have zero cost, with the option of paying for extra features.</p>
</section>
<section id="embracing-the-docs-as-code-philosophy">
<h2>Embracing the “Docs as Code” philosophy<a class="headerlink" href="#embracing-the-docs-as-code-philosophy" title="Link to this heading">¶</a></h2>
<p>The free offerings of most of the options listed above require your
documentation sources to be publicly available. Moreover, these services
expect you to use a <a class="reference external" href="https://en.wikipedia.org/wiki/Version_control">Version Control System</a>, a technology that tracks the
evolution of a collection of files as a series of snapshots (“commits”).
The practice of writing documentation in plain text files with the same tools
as the ones used for software development is commonly known as <a class="reference external" href="https://www.writethedocs.org/guide/docs-as-code/">“Docs as Code”</a>.</p>
<p>The most popular Version Control System nowadays is <a class="reference external" href="https://git-scm.com/">Git</a>, a free and open
source tool that is the backbone of services like GitHub and GitLab.
Since both Read the Docs and Netlify have integrations with GitHub and GitLab,
and both GitHub and GitLab have an integrated Pages product, the most effective
way of automatically build your documentation online is to upload your sources
to either of these Git hosting services.</p>
</section>
<section id="publishing-your-documentation-sources">
<span id="publishing-sources"></span><h2>Publishing your documentation sources<a class="headerlink" href="#publishing-your-documentation-sources" title="Link to this heading">¶</a></h2>
<section id="id1">
<h3>GitHub<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<p>The quickest way to upload an existing project to GitHub is to:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://github.com/signup">Sign up for a GitHub account</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/new">Create a new repository</a>.</p></li>
<li><p>Open <a class="reference external" href="https://docs.github.com/en/repositories/working-with-files/managing-files/adding-a-file-to-a-repository">the “Upload files” page</a> of your new repository.</p></li>
<li><p>Select the files on your operating system file browser (in your case
<code class="docutils literal notranslate"><span class="pre">README.rst</span></code>, <code class="docutils literal notranslate"><span class="pre">lumache.py</span></code>, the makefiles under the <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory,
and everything under <code class="docutils literal notranslate"><span class="pre">docs/source</span></code>) and drag them to the GitHub interface
to upload them all.</p></li>
<li><p>Click on the <span class="guilabel">Commit changes</span> button.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you don’t upload the <code class="docutils literal notranslate"><span class="pre">docs/build</span></code> directory, as it contains the
output generated by Sphinx and it will change every time you change the
sources, complicating your workflow.</p>
</div>
<p>These steps do not require access to the command line or installing any
additional software. To learn more, you can:</p>
<ul class="simple">
<li><p>Follow <a class="reference external" href="https://lab.github.com/githubtraining/introduction-to-github">this interactive GitHub course</a> to learn more about how the GitHub
interface works.</p></li>
<li><p>Read <a class="reference external" href="https://docs.github.com/en/get-started/quickstart">this quickstart tutorial</a> to install extra software on your machine
and have more flexibility. You can either use the Git command line, or the
GitHub Desktop application.</p></li>
</ul>
</section>
<section id="id2">
<h3>GitLab<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>Similarly to GitHub, the fastest way to upload your project to GitLab is
using the web interface:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://gitlab.com/users/sign_up">Sign up for a GitLab account</a>.</p></li>
<li><p><a class="reference external" href="https://gitlab.com/projects/new">Create a new blank project</a>.</p></li>
<li><p>Upload the project files (in your case <code class="docutils literal notranslate"><span class="pre">README.rst</span></code>, <code class="docutils literal notranslate"><span class="pre">lumache.py</span></code>, the
makefiles under the <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory, and everything under
<code class="docutils literal notranslate"><span class="pre">docs/source</span></code>) one by one using the <span class="guilabel">Upload File</span> button <a class="footnote-reference brackets" href="#f1" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p></li>
</ol>
<p>Again, these steps do not require additional software on your computer. To
learn more, you can:</p>
<ul class="simple">
<li><p>Follow <a class="reference external" href="https://docs.gitlab.com/ee/gitlab-basics/start-using-git.html">this tutorial</a> to install Git on your machine.</p></li>
<li><p>Browse the <a class="reference external" href="https://docs.gitlab.com/ee/user/index.html">GitLab User documentation</a> to understand the possibilities of
the platform.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you don’t upload the <code class="docutils literal notranslate"><span class="pre">docs/build</span></code> directory, as it contains the
output generated by Sphinx and it will change every time you change the
sources, complicating your workflow.</p>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">1</a><span class="fn-bracket">]</span></span>
<p>At the time of writing, <a class="reference external" href="https://gitlab.com/gitlab-org/gitlab/-/issues/228490">uploading whole directories to GitLab using
only the web
interface</a> is
not yet implemented.</p>
</aside>
</aside>
</section>
</section>
<section id="publishing-your-html-documentation">
<h2>Publishing your HTML documentation<a class="headerlink" href="#publishing-your-html-documentation" title="Link to this heading">¶</a></h2>
<section id="id4">
<h3>Read the Docs<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://readthedocs.org/">Read the Docs</a> offers integration with both GitHub and GitLab. The quickest
way of getting started is to follow <span class="xref std std-doc">the RTD
tutorial</span>, which is loosely based on this one.
You can publish your sources on GitHub as explained <a class="reference internal" href="#publishing-sources"><span class="std std-ref">in the previous
section</span></a>, then skip directly to
<span class="xref std std-ref">readthedocs:tutorial/index:Sign up for Read the Docs</span>.
If you choose GitLab instead, the process is similar.</p>
</section>
<section id="id5">
<h3>GitHub Pages<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://pages.github.com/">GitHub Pages</a> requires you to <a class="reference internal" href="#publishing-sources"><span class="std std-ref">publish your
sources</span></a> on <a class="reference external" href="https://github.com/">GitHub</a>. After that, you will need an
automated process that performs the <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> step every time the sources
change. That can be achieved using <a class="reference external" href="https://github.com/features/actions">GitHub Actions</a>.</p>
<p>After you have published your sources on GitHub, create a file named
<code class="docutils literal notranslate"><span class="pre">.github/workflows/sphinx.yml</span></code> in your repository with the following
contents:</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">.github/workflows/</span><a class="headerlink" href="#id7" title="Link to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Sphinx:</span><span class="nv"> </span><span class="s">Render</span><span class="nv"> </span><span class="s">docs&quot;</span>

<span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">push</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">build</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">permissions</span><span class="p">:</span>
<span class="w">      </span><span class="nt">contents</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">write</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build HTML</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ammaraskar/sphinx-action@master</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload artifacts</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v3</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">html-docs</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docs/build/html/</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">peaceiris/actions-gh-pages@v3</span>
<span class="w">      </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">github.ref == &#39;refs/heads/main&#39;</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">github_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.GITHUB_TOKEN }}</span>
<span class="w">        </span><span class="nt">publish_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docs/build/html</span>
</pre></div>
</div>
</div>
<p>This contains a GitHub Actions workflow with a single job of four steps:</p>
<ol class="arabic simple">
<li><p>Checkout the code.</p></li>
<li><p>Build the HTML documentation using Sphinx.</p></li>
<li><p>Attach the HTML output the artifacts to the GitHub Actions job, for easier
inspection.</p></li>
<li><p>If the change happens on the default branch, take the contents of
<code class="docutils literal notranslate"><span class="pre">docs/build/html</span></code> and push it to the <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch.</p></li>
</ol>
<p>Next, you need to specify the dependencies for the <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> step to be
successful. For that, create a file <code class="docutils literal notranslate"><span class="pre">docs/requirements.txt</span></code> and add the
following contents:</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">docs/requirements.txt</span><a class="headerlink" href="#id8" title="Link to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">furo</span><span class="o">==</span><span class="mf">2021.11.16</span>
</pre></div>
</div>
</div>
<p>And finally, you are ready to <a class="reference external" href="https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site">enable GitHub Pages on your repository</a>. For
that, go to <span class="guilabel">Settings</span>, then <span class="guilabel">Pages</span> on the left sidebar,
select the <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch in the “Source” dropdown menu, and click
<span class="guilabel">Save</span>. After a few minutes, you should be able to see your HTML at
the designated URL.</p>
</section>
<section id="id6">
<h3>GitLab Pages<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://about.gitlab.com/stages-devops-lifecycle/pages/">GitLab Pages</a>, on the other hand, requires you to <a class="reference internal" href="#publishing-sources"><span class="std std-ref">publish your
sources</span></a> on <a class="reference external" href="https://gitlab.com/">GitLab</a>. When you are ready, you can
automate the process of running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> using <a class="reference external" href="https://about.gitlab.com/stages-devops-lifecycle/continuous-integration/">GitLab CI</a>.</p>
<p>After you have published your sources on GitLab, create a file named
<code class="docutils literal notranslate"><span class="pre">.gitlab-ci.yml</span></code> in your repository with these contents:</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">.gitlab-ci.yml</span><a class="headerlink" href="#id9" title="Link to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">stages</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deploy</span>

<span class="nt">pages</span><span class="p">:</span>
<span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deploy</span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python:3.9-slim</span>
<span class="w">  </span><span class="nt">before_script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apt-get update &amp;&amp; apt-get install make --no-install-recommends -y</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python -m pip install sphinx furo</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cd docs &amp;&amp; make html</span>
<span class="w">  </span><span class="nt">after_script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mv docs/build/html/ ./public/</span>
<span class="w">  </span><span class="nt">artifacts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">public</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$CI_COMMIT_REF_NAME == $CI_DEFAULT_BRANCH</span>
</pre></div>
</div>
</div>
<p>This contains a GitLab CI workflow with one job of several steps:</p>
<ol class="arabic simple">
<li><p>Install the necessary dependencies.</p></li>
<li><p>Build the HTML documentation using Sphinx.</p></li>
<li><p>Move the output to a known artifacts location.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to <a class="reference external" href="https://about.gitlab.com/blog/2021/05/17/prevent-crypto-mining-abuse/#validating-an-account">validate your account</a> by entering a payment method
(you will be charged a small amount that will then be reimbursed).</p>
</div>
<p>After that, if the pipeline is successful, you should be able to see your HTML
at the designated URL.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">techwords</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, techwords.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/doc/tutorial/deploying.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>